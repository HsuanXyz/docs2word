{"version":3,"sources":["../../src/parse-word.js"],"names":["parseWord","wordFrequency","docs","cleanStr","split","filter","e","length","wordArr","only","Set","result","i","wordItem","name","value","y","push","text","replace","trim"],"mappings":";;;;;QASgBA,S,GAAAA,S;QAUAC,a,GAAAA,a;;;;AAnBhB;;;;AAIA;;;;;AAKO,SAASD,SAAT,CAAmBE,IAAnB,EAAwB;AAC3B,QAAG,CAACA,IAAJ,EAAU,OAAO,EAAP;;AAEVA,WAAOC,SAASD,IAAT,CAAP,CAH2B,CAGJ;;AAEvB,WAAOA,KAAKE,KAAL,CAAW,GAAX,EAAgBC,MAAhB,CAAwB,UAASC,CAAT,EAAY;AACvC,eAAOA,MAAM,EAAN,IAAYA,EAAEC,MAAF,GAAW,CAA9B;AACH,KAFM,CAAP;AAGH;;AAEM,SAASN,aAAT,CAAuBO,OAAvB,EAA+B;AAClC,QAAIC,oCAAW,IAAIC,GAAJ,CAAQF,OAAR,CAAX,EAAJ;AACA,QAAIG,SAAS,EAAb;;AAEA,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIH,KAAKF,MAAxB,EAAgCK,GAAhC,EAAoC;;AAEhC,YAAIC,WAAW,EAACC,MAAKL,KAAKG,CAAL,CAAN,EAAeG,OAAM,CAArB,EAAf;;AAEA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAKR,QAAQD,MAA5B,EAAoCS,GAApC,EAAwC;AACpC,gBAAGH,SAASC,IAAT,KAAkBN,QAAQQ,CAAR,CAArB,EAAgC;AAC5BH,yBAASE,KAAT;AACH;AACJ;;AAEDJ,eAAOM,IAAP,CAAYJ,QAAZ;AACH;;AAED,WAAOF,MAAP;AACH;;AAED;;;;;AAKA,SAASR,QAAT,CAAkBe,IAAlB,EAAwB;AACpBA,WAAOA,KAAKC,OAAL,CAAa,eAAb,EAA6B,EAA7B,CAAP,CADoB,CACqB;AACzCD,WAAOA,KAAKC,OAAL,CAAa,kFAAb,EAAgG,EAAhG,CAAP,CAFoB,CAEwF;AAC5GD,WAAOA,KAAKC,OAAL,CAAa,UAAb,EAAwB,GAAxB,CAAP,CAHoB,CAGiB;AACrCD,WAAOA,KAAKC,OAAL,CAAa,MAAb,EAAoB,GAApB,CAAP,CAJoB,CAIa;AACjCD,WAAOA,KAAKC,OAAL,CAAa,KAAb,EAAmB,GAAnB,CAAP,CALoB,CAKY;AAChCD,WAAOA,KAAKC,OAAL,CAAa,4BAAb,EAA0C,GAA1C,CAAP,CANoB,CAMmC;AACvDD,WAAOA,KAAKC,OAAL,CAAa,IAAb,EAAkB,GAAlB,CAAP,CAPoB,CAOW;AAC/BD,WAAOA,KAAKC,OAAL,CAAa,QAAb,EAAsB,GAAtB,CAAP,CARoB,CAQe;AACnCD,WAAOA,KAAKC,OAAL,CAAa,gBAAb,EAA8B,GAA9B,CAAP,CAToB,CASuB;AAC3CD,WAAOA,KAAKC,OAAL,CAAa,4BAAb,EAA0C,EAA1C,CAAP,CAVoB,CAUkC;AACtDD,WAAOA,KAAKC,OAAL,CAAa,QAAb,EAAsB,EAAtB,CAAP,CAXoB,CAWc;AAClC,WAAOD,KAAKE,IAAL,EAAP;AACH","file":"parse-word.js","sourcesContent":["/**\n * Created by hsuanlee on 16/05/2017.\n */\n\n/**\n * 将docs解析为单词数组\n * @param docs {string}\n * @returns {Array<string>}\n */\nexport function parseWord(docs){\n    if(!docs) return [];\n\n    docs = cleanStr(docs); // 清除无效字符串\n\n    return docs.split(' ').filter( function(e) {\n        return e !== '' && e.length > 1;\n    })\n}\n\nexport function wordFrequency(wordArr){\n    let only = [...new Set(wordArr)];\n    let result = [];\n\n    for(let i = 0; i < only.length; i++){\n\n        let wordItem = {name:only[i], value:0};\n\n        for(let y = 0; y <  wordArr.length; y++){\n            if(wordItem.name === wordArr[y]){\n                wordItem.value++\n            }\n        }\n\n        result.push(wordItem);\n    }\n\n    return result;\n}\n\n/**\n * 清除无效字符串\n * @param text {string}\n * @returns {string}\n */\nfunction cleanStr(text) {\n    text = text.replace(/\\[.*\\]\\(.*\\)/g,''); // md链接链接\n    text = text.replace(/[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/g,''); // 链接\n    text = text.replace(/[\\n|\\r]/g,' '); // 换行\n    text = text.replace(/(`)/g,' '); // 代码块\n    text = text.replace(/\\//g,' '); // /\n    text = text.replace(/(,|\\.|'|\"|\\?|!|~|”|“|&|@)/g,' '); // 标点符号\n    text = text.replace(/_/g,' '); // 下划线\n    text = text.replace(/(<|>)/g,' '); // html\n    text = text.replace(/({|}|\\(|\\)|;)/g,' '); // 代码\n    text = text.replace(/[=\\[\\]#\\(\\)\\*\\?\\!:\\+\\-\\.]/g,''); // md格式化字符串\n    text = text.replace(/[0-9]/g,''); // 数字\n    return text.trim();\n}\n\n"]}