{"version":3,"sources":["../main.js"],"names":["then","words","res","Promise","resolve","result","splice","length","map","e","i","name","tr","w","console","log"],"mappings":";;AAGA;;AACA;;AACA;;AACA;;;;;;AANA;;;AASA,oBAAS,MAAT,EAAiB,OAAjB,EACKA,IADL,CACU,eAAO;;AAET;AACA,QAAIC,QAAQ,8BAAc,0BAAUC,GAAV,CAAd,CAAZ;;AAEA;AACA,WAAO,qBAAUD,KAAV,EACFD,IADE,CACI;AAAA,eAAMG,QAAQC,OAAR,CAAgBH,KAAhB,CAAN;AAAA,KADJ,CAAP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAnBL,EAoBKD,IApBL,CAoBU,eAAO;AACT,QAAIK,SAASH,GAAb;AACAG,WAAOC,MAAP,CAAc,GAAd,EAAkBD,OAAOE,MAAP,GAAc,GAAhC;;AAEA,mBAAKC,GAAL,CAASH,MAAT,EAAiB,UAACI,CAAD,EAAGC,CAAH,EAAS;AACtB,eAAO,iCAAeD,EAAEE,IAAjB,EACFX,IADE,CACI,aAAK;AACR;AACAK,mBAAOK,CAAP,EAAUE,EAAV,GAAeC,CAAf;AACH,SAJE,CAAP;AAKH,KAND,EAOKb,IAPL,CAOW,YAAM;AACTc,gBAAQC,GAAR,CAAYV,MAAZ;AACA,+BAAYA,MAAZ;AACH,KAVL;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CA7CL","file":"main.js","sourcesContent":["/**\n * Created by hsuanlee on 16/05/2017.\n */\nimport {readFile, writeTemp, writeResult} from './src/file'\nimport {parseWord, wordFrequency} from './src/parse-word'\nimport { getTranslation } from './src/translation'\nimport when from 'when'\n\n\nreadFile('./md', 'utf-8')\n    .then(res => {\n\n        // 生成单词数组\n        let words = wordFrequency(parseWord(res));\n\n        // 创建缓存文件\n        return writeTemp(words)\n            .then( () => Promise.resolve(words))\n        // for(let i = 0; i < 50; i++){\n        //     console.log(words[i])\n        // }\n        // words.forEach( (e) => {\n        //     console.log(e)\n        //     getTranslation(e)\n        //         .then( obj => {\n        //             console.log(obj)\n        //         })\n        // })\n    })\n    .then(res => {\n        let result = res;\n        result.splice(980,result.length-980);\n\n        when.map(result, (e,i) => {\n            return getTranslation(e.name)\n                .then( w => {\n                    // console.log(JSON.parse(w))\n                    result[i].tr = w;\n                });\n        })\n            .then( () => {\n                console.log(result)\n                writeResult(result)\n            })\n\n        // for(let i = 0; i < 10; i++){\n        //     getTranslation(result[i].name)\n        //         .then( w => {\n        //             result[i].tr = w;\n        //         })\n        // }\n        // console.log(result[0])\n        // console.log(result[1])\n        // console.log(result[2])\n    });\n\n"]}